const DEFAULT_CHAR_HEIGHT=5,DEFAULT_COLOR="#000";export const initFont=({height:e=5,...t}={},o)=>{if(!t)return void console.error("No font provided!");if(!o)return void console.error("No context provided");return(r,n=0,i=0,c=24,d="#000")=>{console.debug("Rendering string",r),[...r].reduce((r,a)=>{const l=c/e,g=t[a.charCodeAt()]||"",s=(e=>e>0)(g)?g:g.codePointAt(),h=(s||0).toString(2),p=Math.ceil(h.length/e),u=r+l,A=((e,t)=>e.match(new RegExp(`.{${t}}`,"g")))(h.padStart(p*e,0),e);return console.debug("Rendering char",a,a.charCodeAt(),g,s,A),A.map((e,t)=>[...e].map((e,r)=>{o.fillStyle=+e?d:"transparent",o.fillRect(n+u+t*l,i+r*l,l,l)})),r+(p+1)*l},0)}};
